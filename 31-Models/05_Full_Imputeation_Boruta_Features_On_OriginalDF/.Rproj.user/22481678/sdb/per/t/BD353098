{
    "contents" : "AutoModel <- function(DF_INPUT, SEED=1)\n{\n###############################################################################################\n## PURPOSE: TEMPLATE R-SCRIPT TO AUTOMATE MODEL BUILDING & ACCURACY CHECK\n## USAGE: CUSTOMIZE EACH SECTION FOR SPECIFIC DATA ANALYSIS NEED\n## TECHNIQUES: GLM, CART & RANDOM FORREST\n###############################################################################################\n\n## LOAD REQUIRED LIBRARIES\nlibrary(caTools)\nlibrary(rpart)\nlibrary(randomForest)\nlibrary(ROCR)\n\n## INITIALIZE VARIABLES\n\nModelTypes = c(\"glm\", \"CART\", \"RandomForest\")\nSplRatio <- c(0.50,0.55,0.60,0.65,0.70,0.75,0.80)\nRandSeed <- ifelse(SEED != 1, SEED, 13)\nThreshold <- c(0.40,0.45,0.50,0.55,0.60)\nTotalRows <- ((length(ModelTypes)-1) * length(SplRatio)) + (length(SplRatio) * length(Threshold))\ndfInput = DF_INPUT\nrIndex = 1\n\n## INITIALIZE OUTPUT DATA FRAME\n\ndfOutput = data.frame(matrix(NA, nrow=TotalRows, ncol=6))\ncolnames(dfOutput) = c(\"Model.Technique\", \"SplitRatio\", \"Threshold\", \"AUC\", \"TrainingSet_Accuracy\", \"TestingSet_Accuracy\")\n\n## BUILD & EVALUATE MODELS\n\nfor (i in 1:length(SplRatio))\n{\n    set.seed(RandSeed)\n    \n    ####: Needs to be customized\n    splt = sample.split(dfInput$Party, SplitRatio = SplRatio[i])\n    dfTrain = subset(dfInput, splt == TRUE)\n    dfTest = subset(dfInput, splt == FALSE)\n    \n    ####: Check for required customization before each run\n    glmModel = glm(Party ~ Q109244 + Q113181 + Q98197 + Q98869, data = dfTrain, family = \"binomial\")\n    cartModel = rpart(Party ~ Q109244 + Q113181 + Q98197 + Q98869, data = dfTrain, method = \"class\")\n    rfModel = randomForest(Party ~ Q109244 + Q113181 + Q98197 + Q98869, data = dfTrain)\n    for(i1 in 1:length(ModelTypes))\n    {\n        if(ModelTypes[i1] == \"glm\")\n        {\n            predTrain = predict(glmModel, type = \"response\")\n            predTest = predict(glmModel, newdata = dfTest, type = \"response\")\n            \n            for(i2 in 1:length(Threshold))\n            {\n                dfOutput[rIndex,1] = ModelTypes[i1]\n                dfOutput[rIndex,2] = SplRatio[i]\n                dfOutput[rIndex,3] = Threshold[i2]\n                ####: Check for required customization before each run\n                dfOutput[rIndex,4] = as.numeric(performance(prediction(predTest, dfTest$Party), \"auc\")@y.values)\n                m = as.matrix(table(dfTrain$Party, predTrain > Threshold[i2]))\n                dfOutput[rIndex,5] = (m[1,1] + m[2,2]) / nrow(dfTrain)\n                m = as.matrix(table(dfTest$Party, predTest > Threshold[i2]))\n                dfOutput[rIndex,6] = (m[1,1] + m[2,2]) / nrow(dfTest)\n                rIndex = rIndex + 1\n            }\n        }\n        \n        if(ModelTypes[i1] == \"CART\")\n        {\n            predTrain = predict(cartModel, type = \"class\")\n            predTest = predict(cartModel, newdata = dfTest, type = \"class\")\n            \n            dfOutput[rIndex,1] = ModelTypes[i1]\n            dfOutput[rIndex,2] = SplRatio[i]\n            dfOutput[rIndex,3] = \"\"\n            dfOutput[rIndex,4] = \"\"\n            ####: Check for required customization before each run\n            m = as.matrix(table(dfTrain$Party, predTrain))\n            dfOutput[rIndex,5] = (m[1,1] + m[2,2]) / nrow(dfTrain)\n            m = as.matrix(table(dfTest$Party, predTest))\n            dfOutput[rIndex,6] = (m[1,1] + m[2,2]) / nrow(dfTest)\n            rIndex = rIndex + 1\n        }\n        \n        if(ModelTypes[i1] == \"RandomForest\")\n        {\n            predTrain = predict(rfModel, type = \"class\")\n            predTest = predict(rfModel, newdata = dfTest, type = \"class\")\n            \n            dfOutput[rIndex,1] = ModelTypes[i1]\n            dfOutput[rIndex,2] = SplRatio[i]\n            dfOutput[rIndex,3] = \"\"\n            dfOutput[rIndex,4] = \"\"\n            ####: Check for required customization before each run\n            m = as.matrix(table(dfTrain$Party, predTrain))\n            dfOutput[rIndex,5] = (m[1,1] + m[2,2]) / nrow(dfTrain)\n            m = as.matrix(table(dfTest$Party, predTest))\n            dfOutput[rIndex,6] = (m[1,1] + m[2,2]) / nrow(dfTest)\n            rIndex = rIndex + 1\n        }\n    }\n}\n## WRITE THE OUTPUT TO CSV FILE\n    write.csv(dfOutput, \"AutoModel_V1_Output.csv\", row.names = FALSE)\n}",
    "created" : 1465581243206.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3574594266",
    "id" : "BD353098",
    "lastKnownWriteTime" : 1465580321,
    "path" : "~/AnalyticsEdge/Week 7_Kaggle_Competition/MIT_TheAnalyticsEdge/31-Models/05_Full_Imputeation_Boruta_Features_On_OriginalDF/AutoModel_V1.0.R",
    "project_path" : "AutoModel_V1.0.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}